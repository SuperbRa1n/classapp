{"version":3,"file":"setting.js","sources":["pages/setting/setting.vue","pages/setting/setting.vue?type=page"],"sourcesContent":["<template>\n\t<view v-if=\"isLogin\" class=\"login\">\n\t\t<img class=\"logo\" src=\"../../static/head.jpg\">\n\t\t<!-- 输入学号密码存储到username和password两个变量中 -->\n\t\t<input class=\"input\" @input=\"getUserName\" :value=\"value\" type=\"text\" placeholder=\"学号\" />\n\t\t<input class=\"input\" @input=\"getPassWord\" :value=\"value\" type=\"text\" placeholder=\"密码\" />\n\t\t<button class=\"button\" type=\"primary\" :loading=\"isLoading\" @click=\"userLogin()\">登录</button>\n\t</view>\n\t<view v-if=\"!isLogin\" class=\"setting\">\n\t\t<view class=\"user\">\n\t\t\t<img class=\"logo\" src=\"../../static/head.jpg\" />\n\t\t\t<br />\n\t\t\t<text v-if=\"xm==''\" class=\"xm\">{{信息加载中}}</text>\n\t\t\t<text v-else class=\"xm\">{{xm}}</text>\n\t\t</view>\n\t\t<view class=\"refresh\" style=\"margin-top: 20rpx\">\n\t\t\t<text style=\"margin-left: 20rpx;\">刷新设置</text>\n\t\t\t<view class=\"refresh-now\" @click=\"userLogin\">\n\t\t\t\t<image src=\"../../static/refresh.png\" style=\"margin-left: 20rpx; width: 30rpx; height: 30rpx;\"></image>\n\t\t\t\t<text style=\"margin-left: 10rpx;\">立即刷新数据</text>\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"refresh\" style=\"margin-top: 20rpx\">\n\t\t\t<text style=\"margin-left: 20rpx;\">用户设置</text>\n\t\t\t<view class=\"refresh-now\" @click=\"changeUser\">\n\t\t\t\t<image src=\"../../static/user.png\" style=\"margin-left: 20rpx; width: 30rpx; height: 30rpx;\"></image>\n\t\t\t\t<text style=\"margin-left: 10rpx;\">切换用户</text>\n\t\t\t</view>\n\t\t</view>\n\t\t<view class=\"refresh\" style=\"margin-top: 20rpx\">\n\t\t\t<text style=\"margin-left: 20rpx;\">其他</text>\n\t\t\t<view class=\"refresh-now\" @click=\"displayTiaokuan\">\n\t\t\t\t<image src=\"../../static/info.png\" style=\"margin-left: 20rpx; width: 30rpx; height: 30rpx;\"></image>\n\t\t\t\t<text style=\"margin-left: 10rpx;\">用户条款</text>\n\t\t\t</view>\n\t\t\t<view class=\"refresh-now\" @click=\"aboutUs\" style=\"margin-top: -20rpx; padding-top: 30rpx;\">\n\t\t\t\t<image src=\"../../static/more.png\" style=\"margin-left: 20rpx; width: 30rpx; height: 30rpx;\"></image>\n\t\t\t\t<text style=\"margin-left: 10rpx;\">关于我们</text>\n\t\t\t</view>\n\t\t</view>\n\t</view>\n</template>\n\n<script>\n\texport default {\n\t\tdata() {\n\t\t\treturn {\n\t\t\t\tisLogin: true,\n\t\t\t\tisLoading: false,\n\t\t\t\tusername: '',\n\t\t\t\tpassword: '',\n\t\t\t\tclassData: [],\n\t\t\t\tgradeData: [],\n\t\t\t\txm: '',\n\t\t\t\tvalue: '',\n\t\t\t\turl: 'http://124.220.13.16:5000',\n        JSESSIONID: '',\n\n\t\t\t}\n\t\t},\n\t\tonLoad() {\n\t\t\tthis.username = uni.getStorageSync('username');\n\t\t\tthis.password = uni.getStorageSync('password');\n\t\t\tthis.xm = uni.getStorageSync('xm');\n\t\t\tif (this.username != '') {\n\t\t\t\tthis.isLogin = false;\n\t\t\t\tthis.userLogin();\n\t\t\t} else {\n\t\t\t\tthis.isLogin = true;\n\t\t\t}\n\t\t},\n\t\tmethods: {\n\t\t\tuserLogin() {\n\t\t\t\tthis.isLoading = true;\n        uni.request({\n          url: this.url + '/login',\n          method: 'POST',\n          data: {\n            \"username\": this.username,\n            \"password\": this.password\n          },\n          header: {\n            'content-type': 'application/x-www-form-urlencoded'\n          },\n          success: (res) => {\n            this.isLoading = false;\n            this.isLogin = false;\n            this.JSESSIONID = res.data.JSESSIONID;\n            uni.setStorageSync('username', this.username);\n            uni.setStorageSync('password', this.password);\n            uni.setStorageSync('JSESSIONID', res.data.JSESSIONID);\n            this.classData = [];\n            this.gradeData = [];\n            var xnmList = ['2030', '2029', '2028', '2027', '2026', '2025', '2024', '2023', '2022', '2021', '2019', '2018'];\n            var xqmList = ['3', '12'];\n            for (var i = 0; i < xnmList.length; i++) {\n              for (var j = 0; j < xqmList.length; j++) {\n                this.getInfo(xnmList[i], xqmList[j]);\n              }\n            }\n          },\n          fail: (err) => {\n            console.log(err);\n            this.isLoading = false;\n          }\n        });\n\t\t\t},\n\t\t\tgetInfo(xnm, xqm) {\n\t\t\t\tuni.request({\n\t\t\t\t\turl: this.url + '/class',\n\t\t\t\t\tmethod: 'POST',\n\t\t\t\t\tdata: {\n\t\t\t\t\t\t\"JSESSIONID\": this.JSESSIONID,\n            \"xnm\": xnm,\n            \"xqm\": xqm\n\t\t\t\t\t},\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded'\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t\t\tthis.isLogin = false;\n\t\t\t\t\t\tif (res.data.kbList.length != 0) {\n              this.classData.push(res.data);\n              uni.setStorageSync('classData', this.classData);\n              console.log(this.classData);\n            }\n\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tuni.request({\n\t\t\t\t\turl: this.url + '/grade',\n\t\t\t\t\tmethod: \"POST\",\n\t\t\t\t\tdata: {\n            \"JSESSIONID\": this.JSESSIONID,\n            \"xnm\": xnm,\n            \"xqm\": xqm\n\t\t\t\t\t},\n\t\t\t\t\theader: {\n\t\t\t\t\t\t'content-type': 'application/x-www-form-urlencoded'\n\t\t\t\t\t},\n\t\t\t\t\tsuccess: (res) => {\n\t\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t\t\tthis.isLogin = false;\n\t\t\t\t\t\tif (res.data.items.length != 0) {\n              this.gradeData.push(res.data);\n              this.xm = res.data.items[0].xm;\n              uni.setStorageSync('xm', this.xm);\n              uni.setStorageSync('gradeData', this.gradeData);\n              console.log(this.gradeData);\n            }\n\t\t\t\t\t},\n\t\t\t\t\tfail: (err) => {\n\t\t\t\t\t\tconsole.log(err);\n\t\t\t\t\t\tthis.isLoading = false;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t},\n\t\t\tgetUserName(e) {\n\t\t\t\tthis.username = e.detail.value;\n\t\t\t},\n\t\t\tgetPassWord(e) {\n\t\t\t\tthis.password = e.detail.value;\n\t\t\t},\n\t\t\tchangeUser() {\n\t\t\t\tuni.removeStorageSync('username');\n\t\t\t\tuni.removeStorageSync('password');\n        uni.removeStorageSync('classData');\n        uni.removeStorageSync('gradeData');\n        uni.removeStorageSync('JSESSIONID');\n\t\t\t\tuni.removeStorageSync('xm');\n\t\t\t\tthis.username = '';\n\t\t\t\tthis.password = '';\n\t\t\t\tthis.xm = '';\n\t\t\t\tthis.isLogin = true;\n\t\t\t},\n\t\t\tdisplayTiaokuan() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '../tiaokuan/tiaokuan'\n\t\t\t\t});\n\t\t\t},\n\t\t\taboutUs() {\n\t\t\t\tuni.navigateTo({\n\t\t\t\t\turl: '../about/about'\n\t\t\t\t});\n\t\t\t}\n\t\t},\n\t}\n</script>\n\n<style>\n\t.login {\n\t\tdisplay: block;\n\t\tmargin-top: 80rpx;\n\t\ttext-align: center;\n\t}\n\n\t.logo {\n\t\twidth: 200rpx;\n\t\theight: 200rpx;\n\t\tdisplay: inline-block;\n\t\tmargin-top: 20rpx;\n\t}\n\n\t.input {\n\t\twidth: 90%;\n\t\tmargin-top: 20rpx;\n\t\tborder-radius: 5%;\n\t\tdisplay: inline-block;\n\t\tbackground-color: #ffffff;\n\t\theight: 100rpx;\n\t}\n\n\t.button {\n\t\twidth: 60%;\n\t\tmargin-top: 80rpx;\n\t}\n\t\n\t.user {\n\t\tdisplay: block;\n\t\ttext-align: center;\n\t\tmargin-top: 0rpx;\n\t\tbackground-color: #ffffff;\n\t\tborder-radius: 5%;\n\t}\n\t\n\t.xm {\n\t\tdisplay: inline-block;\n\t\tmargin-top: 20rpx;\n\t\tmargin-bottom: 20rpx;\n\t\tfont-size: 40rpx;\n\t\tfont-family: '思源黑体';\n\t\tfont-weight: bold;\n\t\tcolor: #4a90e2;\n\t}\n\t\n\t.refresh-now {\n\t\tdisplay: block;\n\t\tmargin-top: 20rpx;\n\t\tmargin-left: 20rpx;\n\t\tmargin-right: 20rpx;\n\t\tpadding-top: 10rpx;\n\t\tpadding-bottom: 10rpx;\n\t\tbackground-color: #ffffff;\n\t\tborder-radius: 5%;\n\t}\n</style>","import MiniProgramPage from '/Users/tanninrachel/Documents/code/classapp/pages/setting/setting.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":"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"}