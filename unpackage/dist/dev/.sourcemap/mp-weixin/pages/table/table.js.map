{"version":3,"file":"table.js","sources":["pages/table/table.vue","pages/table/table.vue?type=page"],"sourcesContent":["<template>\n  <view>\n    <view class=\"table\">\n      <view class=\"table-header\">\n        <view v-for=\"(item, index) in time\" class=\"time\" :style=\"'top: ' + ((index + 1) * 6).toString() + 'vh;'\">\n          <text style=\"font-size: 12rpx;\">{{item}}</text>\n          <text style=\"font-size: 24rpx; font-weight: bold;\">{{index + 1}}</text>\n        </view>\n        <view v-for=\"(item, index) in week\" class=\"time\" :style=\"'left: ' + ((index + 1) * 12).toString() + 'vw;'\">\n          <text>{{item}}</text>\n        </view>\n      </view>\n      <view class=\"table-content\">\n        <view v-for=\"(item, index) in classData[getCurIndex()].kbList\" class=\"table-item\"\n              :style=\"'height: ' + ((parseFloat(item.jcs.split('-')[1]) - parseFloat(item.jcs.split('-')[0]) + 1) * 6).toString() + 'vh;'\n                        + 'top: ' + ((parseFloat(item.jcs.split('-')[0]) - 1) * 6).toString() + 'vh;'\n                        + 'left: ' + ((parseFloat(item.xqj) - 1) * 12).toString() + 'vw;'\n                        + 'background-color: ' + colorDict[item.kcmc] + ';'\">\n          <text style=\"color: #000000; font-size: 10rpx; text-align: center;\">{{item.kcmc}}\\n @{{item.cdmc}}</text>\n        </view>\n      </view>\n      <view class=\"table-footer\">\n        <scroll-view class=\"xueqi\" :scroll-x=\"true\" style=\"width: 100%;\">\n          <view style=\"display: flex; flex-direction: row;\">\n            <view class=\"xueqi-item\" v-for=\"(item, index) in xueqiList\" @click=\"changeXueqi(index)\" :style=\"'background-color:' + (item != curXueqi ? '#ffffff' : '#4a90e2') + '; color:' + (item != curXueqi ? '#4a90e2' : '#ffffff')\">\n              <text>{{item}}</text>\n            </view>\n          </view>\n        </scroll-view>\n      </view>\n    </view>\n  </view>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      classData: uni.getStorageSync('classData'),\n      gradeData: uni.getStorageSync('gradeData'),\n      curXueqi: '2023-2024-2',\n      time: ['08:10', '09:00', '10:00', '10:55', '11:45', '12:35', '14:55', '15:45', '16:40', '17:30', '19:00', '19:50', '20:40', '21:45'],\n      week: ['一', '二', '三', '四', '五', '六', '日'],\n      colorList: ['#F9CEEF', '#CCF3EE', '#97C4B8', '#9ADCFF', '#FFF89A', '#FFB2A6', '#D0A2F7', '#F875AA', '#00A9FF', '#E48F45', '#99BC85', '#D2DE32', '#99FFCD', '#B4D4FF'],\n      colorDict: {},\n      xueqiList: [],\n    }\n  },\n  onLoad() {\n    this.classData = uni.getStorageSync('classData');\n    this.curXueqi = this.getCurXueqi();\n    this.changeColor();\n    this.getXueqiList();\n  },\n  methods: {\n    getCurXueqi() {\n      var date = this.classData[0].sjkList[0].dateDigitSeparator;\n      var year = date.split('-')[0];\n      var month = date.split('-')[1];\n      if (parseInt(month) < 9) {\n        return (year - 1).toString() + '-' + year + '-2';\n      } else {\n        return year + '-' + (parseInt(year) + 1).toString() + '-1';\n      }\n    },\n    getCurIndex() {\n      var xnm = this.curXueqi.split('-')[0];\n      var xqm = (this.curXueqi.split('-')[2] == '1') ? '3' : '12';\n      for (var i = 0; i < this.classData.length; i++) {\n        if (this.classData[i].kbList[0].xnm == xnm && this.classData[i].kbList[0].xqm == xqm) {\n          return i;\n        }\n      }\n    },\n    getXueqiList() {\n      var xueqiList = [];\n      for (var i = 0; i < this.classData.length; i++) {\n        var xnm = this.classData[i].kbList[0].xnm + '-' + (parseInt(this.classData[i].kbList[0].xnm) + 1).toString()\n        var xqm = this.classData[i].kbList[0].xqm == '3' ? '1' : '2';\n        xueqiList.push(xnm + '-' + xqm);\n      }\n      this.xueqiList = xueqiList;\n    },\n    changeXueqi(index) {\n      this.curXueqi = this.xueqiList[index];\n      this.changeColor();\n    },\n    changeColor() {\n      for (var i = 0; i < this.classData[this.getCurIndex()].kbList.length; i++) {\n        if (this.colorDict[this.classData[this.getCurIndex()].kbList[i].kcmc] == undefined) {\n          this.colorDict[this.classData[this.getCurIndex()].kbList[i].kcmc] = this.colorList[i % this.colorList.length];\n        }\n      }\n    }\n  }\n}\n</script>\n\n\n\n<style scoped lang=\"scss\">\n  .time {\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    width: 12vw;\n    height: 6vh;\n    border-radius: 5%;\n    position: absolute;\n  }\n\n  .table-content {\n    display: flex;\n    flex-direction: column;\n    position: absolute;\n    top: 6vh;\n    left: 12vw;\n    width: 85vw;\n    height: 85vh;\n    overflow: auto;\n  }\n\n  .table-item {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: absolute;\n    width: 12vw;\n    border-radius: 5%;\n  }\n\n  .table-footer {\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    height: 5vh;\n  }\n\n  .xueqi-item {\n    width: 200rpx;\n    border-radius: 5%;\n    font-size: 24rpx;\n    height: 5vh;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n\n</style>\n","import MiniProgramPage from '/Users/tanninrachel/Documents/code/classapp/pages/table/table.vue'\nwx.createPage(MiniProgramPage)"],"names":["uni"],"mappings":";;AAmCA,MAAK,YAAU;AAAA,EACb,OAAO;AACL,WAAO;AAAA,MACL,WAAWA,cAAAA,MAAI,eAAe,WAAW;AAAA,MACzC,WAAWA,cAAAA,MAAI,eAAe,WAAW;AAAA,MACzC,UAAU;AAAA,MACV,MAAM,CAAC,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,SAAS,OAAO;AAAA,MACnI,MAAM,CAAC,KAAK,KAAK,KAAK,KAAK,KAAK,KAAK,GAAG;AAAA,MACxC,WAAW,CAAC,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,SAAS;AAAA,MACpK,WAAW,CAAE;AAAA,MACb,WAAW,CAAE;AAAA,IACf;AAAA,EACD;AAAA,EACD,SAAS;AACP,SAAK,YAAYA,cAAAA,MAAI,eAAe,WAAW;AAC/C,SAAK,WAAW,KAAK;AACrB,SAAK,YAAW;AAChB,SAAK,aAAY;AAAA,EAClB;AAAA,EACD,SAAS;AAAA,IACP,cAAc;AACZ,UAAI,OAAO,KAAK,UAAU,CAAC,EAAE,QAAQ,CAAC,EAAE;AACxC,UAAI,OAAO,KAAK,MAAM,GAAG,EAAE,CAAC;AAC5B,UAAI,QAAQ,KAAK,MAAM,GAAG,EAAE,CAAC;AAC7B,UAAI,SAAS,KAAK,IAAI,GAAG;AACvB,gBAAQ,OAAO,GAAG,SAAW,IAAE,MAAM,OAAO;AAAA,aACvC;AACL,eAAO,OAAO,OAAO,SAAS,IAAI,IAAI,GAAG,aAAa;AAAA,MACxD;AAAA,IACD;AAAA,IACD,cAAc;AACZ,UAAI,MAAM,KAAK,SAAS,MAAM,GAAG,EAAE,CAAC;AACpC,UAAI,MAAO,KAAK,SAAS,MAAM,GAAG,EAAE,CAAC,KAAK,MAAO,MAAM;AACvD,eAAS,IAAI,GAAG,IAAI,KAAK,UAAU,QAAQ,KAAK;AAC9C,YAAI,KAAK,UAAU,CAAC,EAAE,OAAO,CAAC,EAAE,OAAO,OAAO,KAAK,UAAU,CAAC,EAAE,OAAO,CAAC,EAAE,OAAO,KAAK;AACpF,iBAAO;AAAA,QACT;AAAA,MACF;AAAA,IACD;AAAA,IACD,eAAe;AACb,UAAI,YAAY,CAAA;AAChB,eAAS,IAAI,GAAG,IAAI,KAAK,UAAU,QAAQ,KAAK;AAC9C,YAAI,MAAM,KAAK,UAAU,CAAC,EAAE,OAAO,CAAC,EAAE,MAAM,OAAO,SAAS,KAAK,UAAU,CAAC,EAAE,OAAO,CAAC,EAAE,GAAG,IAAI,GAAG,SAAS;AAC3G,YAAI,MAAM,KAAK,UAAU,CAAC,EAAE,OAAO,CAAC,EAAE,OAAO,MAAM,MAAM;AACzD,kBAAU,KAAK,MAAM,MAAM,GAAG;AAAA,MAChC;AACA,WAAK,YAAY;AAAA,IAClB;AAAA,IACD,YAAY,OAAO;AACjB,WAAK,WAAW,KAAK,UAAU,KAAK;AACpC,WAAK,YAAW;AAAA,IACjB;AAAA,IACD,cAAc;AACZ,eAAS,IAAI,GAAG,IAAI,KAAK,UAAU,KAAK,YAAa,CAAA,EAAE,OAAO,QAAQ,KAAK;AACzE,YAAI,KAAK,UAAU,KAAK,UAAU,KAAK,aAAa,EAAE,OAAO,CAAC,EAAE,IAAI,KAAK,QAAW;AAClF,eAAK,UAAU,KAAK,UAAU,KAAK,YAAW,CAAE,EAAE,OAAO,CAAC,EAAE,IAAI,IAAI,KAAK,UAAU,IAAI,KAAK,UAAU,MAAM;AAAA,QAC9G;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC9FA,GAAG,WAAW,eAAe;"}